<html>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/basic.min.css" />

<script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.js">
</script>

<head>
    <title>Lab 1</title>
</head>

<style>
    #container {
        margin: 0px auto;
        width: 500px;
        height: 375px;
        border: 10px #333 solid;
    }

    #videoElement {
        width: 500px;
        height: 375px;
        background-color: #666;
    }
</style>

<body>
    <h1>This is the Index page 333</h1>
    <output id="result"></output>
    <div id="container">
        <video autoplay="true" id="videoElement">

        </video>
    </div>
     <button onclick="split()">Split</button> 
     <button onclick="trainObj()">Train</button> 
     <button onclick="exportObj()">Export</button> 
     <button onclick="getResults()">Results</button> 
    <form  action='/upload' class="dropzone dz-clickable" id="dropper" enctype="multipart/form-data">
    </form>

</body>

<script>
    var axiosInstance = axios.create({
        baseURL: `${location.protocol}//${location.hostname}`,
    });

    var result = document.getElementById('result');

    axiosInstance
        .get("/hello")
        .then((response) => {
            console.log(response.data);
            result.innerHTML = JSON.stringify(response.data)
        })
        .catch((error) => {
            console.log(error);
        });


    var video = document.querySelector("#videoElement");

    if (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
                video.srcObject = stream;
            })
            .catch(function (err0r) {
                console.log("Something went wrong!");
            });
    }

    var baseURL = `${location.protocol}//${location.hostname}`
             Dropzone.options.dropper = {
                        paramName: 'file',
                        chunking: true,
                        forceChunking: true,
                        url: '/upload',
                        maxFilesize: 1025, // megabytes
                        chunkSize: 1000000 // bytes
                }

    function split() {
          axiosInstance
        .post("/split")
        .then((response) => {
            console.log(response.data);
            result.innerHTML = JSON.stringify(response.data)
        })
        .catch((error) => {
            console.log(error);
        });

       }



  



</script>

</html>
